<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carsale | ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á 6 ‡∏Ñ‡∏±‡∏ô‡∏à‡∏≤‡∏Å Carsale ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£" />
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-blue-900 text-white shadow-md">
    <div class="max-w-7xl mx-auto flex justify-between items-center p-4">
      <div class="flex items-center space-x-3">
        <img src="carsale.png" alt="Carsale Logo" class="w-10 h-10" />
        <h1 class="text-2xl font-bold">Carsale</h1>
      </div>
      <!-- ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏°‡∏ô‡∏π -->
      <nav class="flex gap-4">
        <a href="index.html" class="bg-green-500 text-white px-6 py-3 rounded-full font-semibold shadow hover:bg-green-400">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        <a href="cart.html" class="bg-yellow-400 text-gray-900 px-6 py-3 rounded-full font-semibold shadow hover:bg-yellow-300">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
      </nav>
    </div>
  </header>

  <!-- Search Bar -->
  <section class="w-full bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-3xl mx-auto px-4 py-6">
      <form id="searchForm" class="flex flex-col sm:flex-row gap-4 items-stretch sm:items-end" autocomplete="off">
        <div class="flex-1">
          <label for="q" class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏∏‡πà‡∏ô / ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠</label>
          <input id="q" name="q" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Civic, Vios, Fortuner" class="w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 px-3 py-2" />
        </div>
        <div class="sm:w-auto">
          <button type="submit" class="w-full sm:w-auto bg-blue-600 text-white px-6 py-2 rounded-full font-semibold shadow hover:bg-blue-700">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Results Grid -->
  <main id="results" class="flex-1 w-full py-12">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl font-bold text-blue-800 mb-8 text-center">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
      <p id="noResults" class="hidden text-center text-gray-600 mb-8">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏ñ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
      <div id="carGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-900 text-gray-100 py-6 mt-auto">
    <div class="max-w-7xl mx-auto text-center">
      <p>¬© 2025 Carsale | ‡∏£‡∏ñ‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ</p>
    </div>
  </footer>

  <!-- Script -->
  <script>
    const CAR_DATA = [
      { id: 'vios-2018', model: 'Toyota Vios 1.5E', year: 2018, brand: 'Toyota', odo: 85000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', fuel: '‡πÄ‡∏ö‡∏ô‡∏ã‡∏¥‡∏ô', price: 350000, img: 'vios.jpg' },
      { id: 'civic-2019', model: 'Honda Civic 1.8EL', year: 2019, brand: 'Honda', odo: 60000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', fuel: '‡πÄ‡∏ö‡∏ô‡∏ã‡∏¥‡∏ô', price: 520000, img: 'civic.jpg' },
      { id: 'mazda2-2020', model: 'Mazda 2 Skyactiv', year: 2020, brand: 'Mazda', odo: 40000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', fuel: '‡∏î‡∏µ‡πÄ‡∏ã‡∏•', price: 480000, img: 'mazda2.jpg' },
      { id: 'dmax-2021', model: 'Isuzu D-Max Hi-Lander', year: 2021, brand: 'Isuzu', odo: 55000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤', fuel: '‡∏î‡∏µ‡πÄ‡∏ã‡∏•', price: 690000, img: 'dmax.jpg' },
      { id: 'almera-2022', model: 'Nissan Almera Turbo', year: 2022, brand: 'Nissan', odo: 25000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', fuel: '‡πÄ‡∏ö‡∏ô‡∏ã‡∏¥‡∏ô', price: 420000, img: 'almera.jpg' },
      { id: 'fortuner-2019', model: 'Toyota Fortuner 2.8V 4WD', year: 2019, brand: 'Toyota', odo: 90000, trans: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥', fuel: '‡∏î‡∏µ‡πÄ‡∏ã‡∏•', price: 1050000, img: 'fortuner.jpg' }
    ];

    const carGridEl = document.getElementById('carGrid');
    const noResultsEl = document.getElementById('noResults');
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('q');

    function escapeHTML(text) {
      return text.replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
    }

    // ‚úÖ Card ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô
    function carCardTemplate(car) {
      const priceFmt = car.price.toLocaleString('th-TH');
      const odoFmt = car.odo.toLocaleString('th-TH');
      const modelEscaped = escapeHTML(`${car.model} ${car.year}`);
      return `
        <article class="bg-white rounded-lg shadow hover:shadow-lg transition overflow-hidden"
          data-id="${car.id}">
          <img src="${car.img}" alt="${modelEscaped}" loading="lazy" class="w-full h-48 object-cover" />
          <div class="p-4">
            <h3 class="text-xl font-semibold mb-1">${modelEscaped}</h3>
            <p class="text-gray-600 text-sm mb-2">‡∏ß‡∏¥‡πà‡∏á ${odoFmt} ‡∏Å‡∏°. | ${car.trans} | ${car.fuel}</p>
            <p class="text-blue-700 font-bold text-lg mb-4">‡∏ø${priceFmt}</p>
            
            <div class="flex gap-2">
              <button class="flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
                onclick="addToCart('${car.id}')">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
              <button class="flex-1 bg-yellow-400 text-gray-900 px-4 py-2 rounded hover:bg-yellow-300"
                onclick="buyNow('${car.id}')">‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢</button>
            </div>
          </div>
        </article>`;
    }

    function renderCars(list) {
      carGridEl.innerHTML = list.map(carCardTemplate).join('');
      noResultsEl.classList.toggle('hidden', list.length !== 0);
    }

    function filterCars(query) {
      if (!query) return CAR_DATA;
      const q = query.trim().toLowerCase();
      return CAR_DATA.filter(car =>
        car.model.toLowerCase().includes(q) ||
        car.brand.toLowerCase().includes(q) ||
        String(car.year).includes(q)
      );
    }

    searchForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const q = searchInput.value;
      const result = filterCars(q);
      renderCars(result);
      document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    });

    searchInput.addEventListener('input', function () {
      const result = filterCars(this.value);
      renderCars(result);
    });

    renderCars(CAR_DATA);

    // ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞ ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢
    function addToCart(id) {
      const car = CAR_DATA.find(c => c.id === id);
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push(car);
      localStorage.setItem('cart', JSON.stringify(cart));
      window.location.href = "cart.html"; // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
    }

    function buyNow(id) {
      const car = CAR_DATA.find(c => c.id === id);
      localStorage.setItem('checkout', JSON.stringify(car));
      window.location.href = "checkout.html"; // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠
    }
  </script>
</body>
<style>
  html { scroll-behavior: smooth; }
</style>
<script>
  function carCardTemplate(car) {
    const priceFmt = car.price.toLocaleString('th-TH');
    const odoFmt = car.odo.toLocaleString('th-TH');
    return `
      <article class="bg-white rounded-lg shadow hover:shadow-lg transition overflow-hidden"
        data-id="${car.id}">
        <img src="${car.img}" alt="${car.model}" loading="lazy" class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="text-xl font-semibold mb-1">${car.model} (${car.year})</h3>
          <p class="text-gray-600 text-sm mb-2">‡∏ß‡∏¥‡πà‡∏á ${odoFmt} ‡∏Å‡∏°. | ${car.trans} | ${car.fuel}</p>
          <p class="text-blue-700 font-bold text-lg mb-4">‡∏ø${priceFmt}</p>
          <div class="space-x-2">
            <button onclick="buyNow('${car.id}')" 
              class="bg-yellow-400 text-gray-900 px-4 py-2 rounded hover:bg-yellow-300">
              ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢
            </button>
            <button onclick="addToCart('${car.id}')" 
              class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
              ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
            </button>
          </div>
        </div>
      </article>
    `;
  }

  // ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢ (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
  function buyNow(id) {
    const car = CAR_DATA.find(c => c.id === id);
    localStorage.setItem("checkout", JSON.stringify([car])); // ‡πÄ‡∏Å‡πá‡∏ö array ‡πÅ‡∏ï‡πà‡∏°‡∏µ 1 ‡∏ä‡∏¥‡πâ‡∏ô
    window.location.href = "checkout.html";
  }

  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ (‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ)
  function addToCart(id) {
    const car = CAR_DATA.find(c => c.id === id);
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    cart.push(car);
    localStorage.setItem("cart", JSON.stringify(cart));
    window.location.href = "cart.html";
  }
</script>

</html>
